<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InvestSherpa.in - Find Trusted Investment & Insurance Advisors in India</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .hero-bg { background-color: #E6F7F2; }
        .text-brand-dark { color: #0D244F; }
        .text-brand-green { color: #008060; }
        .bg-brand-blue { background-color: #0D244F; }
        .btn-primary { background-color: #F59E0B; color: #ffffff; font-weight: 600; transition: background-color 0.3s ease; }
        .btn-primary:hover { background-color: #D97706; }
        .btn-green { background-color: #008060; color: white; font-weight: 600; transition: background-color 0.3s ease; }
        .btn-green:hover { background-color: #00664d; }
        .card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08); }
        .search-input::placeholder { color: #9ca3af; }
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800" x-data="{ isMobileMenuOpen: false }">

    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="index.html" class="flex items-center space-x-3">
                <img src="InvestSherpa logo.png" alt="InvestSherpa.in Logo" class="h-14 w-auto">
                <span class="text-2xl font-bold">
                    <span class="text-blue-900">Invest</span><span class="text-amber-500">Sherpa</span>
                </span>
            </a>
            <nav class="hidden md:flex items-center space-x-8">
                <a href="index.html" class="text-brand-green font-semibold">Home</a>
                <a href="browselisting.html" class="text-gray-600 hover:text-brand-green font-medium">Browse</a>
                <a href="forprofessionals.html" class="text-gray-600 hover:text-brand-green font-medium">For Professionals</a>
                <a href="learnplan.html" class="text-gray-600 hover:text-brand-green font-medium">Learn & Plan</a>
            </nav>
            <div class="hidden md:flex items-center space-x-4">
                <div id="guest-view">
                    <a href="login.html" class="text-brand-dark font-semibold hover:underline">Login</a>
                    <a href="addlisting.html" class="btn-green font-semibold py-2 px-4 rounded-lg shadow-md ml-4">List Your Business</a>
                </div>
                <div id="user-view" class="hidden items-center space-x-4">
                    <div class="text-right">
                        <a id="user-profile-link" href="#" class="text-sm text-gray-600 hover:text-brand-green hover:underline truncate"></a>
                        <button id="logout-button" class="btn-primary text-sm font-semibold py-2 px-4 rounded-lg shadow-md block">Logout</button>
                    </div>
                </div>
            </div>
            <button @click="isMobileMenuOpen = !isMobileMenuOpen" class="md:hidden text-brand-dark text-2xl focus:outline-none">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <div x-show="isMobileMenuOpen" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-300"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-white z-50 flex flex-col items-center justify-center space-y-8"
         @click.away="isMobileMenuOpen = false" x-cloak>
        
        <button @click="isMobileMenuOpen = false" class="absolute top-6 right-6 text-gray-800 focus:outline-none">
            <i class="fas fa-times text-3xl"></i>
        </button>

        <a href="index.html" @click="isMobileMenuOpen = false" class="text-2xl text-brand-green font-bold">Home</a>
        <a href="browselisting.html" @click="isMobileMenuOpen = false" class="text-2xl text-gray-800 hover:text-brand-green font-bold">Browse</a>
        <a href="forprofessionals.html" @click="isMobileMenuOpen = false" class="text-2xl text-gray-800 hover:text-brand-green font-bold">For Professionals</a>
        <a href="learnplan.html" @click="isMobileMenuOpen = false" class="text-2xl text-gray-800 hover:text-brand-green font-bold">Learn & Plan</a>
        <div class="border-t w-1/2 my-4"></div>
        <a href="login.html" @click="isMobileMenuOpen = false" class="text-xl text-brand-dark font-semibold hover:underline">Login</a>
        <a href="addlisting.html" @click="isMobileMenuOpen = false" class="btn-green text-lg py-3 px-8 rounded-lg shadow-md">List Your Business</a>
    </div>

    <main>
        <section class="hero-bg">
            <div class="container mx-auto px-6 pt-20 pb-24 grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <div>
                    <h1 class="text-4xl md:text-5xl font-bold text-brand-dark mb-6 leading-tight">Find Your Trusted Financial Advisor</h1>
                    <p class="text-lg text-gray-700 mb-8 max-w-lg">Connect with verified professionals and make informed decisions with expert guidance tailored to your goals.</p>
                    
                    <div class="bg-white p-4 rounded-lg shadow-lg max-w-lg">
                        <form class="flex items-center gap-2 sm:gap-4" onsubmit="event.preventDefault(); window.location.href=`browselisting.html?q=${document.getElementById('search-query').value}`;">
                            <i class="fas fa-search text-gray-400 ml-2"></i>
                            <input id="search-query" type="text" placeholder="Search, e.g. 'Mutual Funds'" class="w-full p-2 border-0 focus:ring-0 search-input">
                            <button type="submit" class="btn-primary py-3 px-4 sm:px-6 rounded-lg w-auto whitespace-nowrap">Find</button>
                        </form>
                    </div>

                    <div class="mt-12 grid grid-cols-2 md:grid-cols-4 gap-6 max-w-lg">
                        <div class="text-center">
                            <div id="professionals-count" class="text-2xl font-bold text-brand-dark">0</div>
                            <p class="text-sm text-brand-green">Verified Professionals</p>
                        </div>
                        <div class="text-center">
                            <div id="articles-count" class="text-2xl font-bold text-brand-dark">150+</div>
                            <p class="text-sm text-brand-green">Expert Articles</p>
                        </div>
                        <div class="text-center">
                            <div id="reviews-count" class="text-2xl font-bold text-brand-dark">0</div>
                            <p class="text-sm text-brand-green">Client Reviews</p>
                        </div>
                        <div class="text-center">
                            <div id="cities-count" class="text-2xl font-bold text-brand-dark">0</div>
                            <p class="text-sm text-brand-green">Cities Covered</p>
                        </div>
                    </div>
                </div>

                <div id="hero-carousel" class="hidden md:block text-center relative h-[450px]">
                    <a href="forprofessionals.html" class="hero-slide absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-100"><img src="Hero.png" alt="Financial Advisor Illustration" class="w-full h-full object-contain"></a>
                    <a href="forprofessionals.html" class="hero-slide absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"><img src="Hero2.png" alt="List your business" class="w-full h-full object-contain"></a>
                    <a href="forprofessionals.html" class="hero-slide absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out opacity-0"><img src="Hero3.png" alt="Grow your wealth" class="w-full h-full object-contain"></a>
                </div>
                </div>
        </section>

        <section class="py-16 md:py-24 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-brand-dark">Choose Your Path to Financial Success</h2>
                    <p class="text-gray-600 mt-2 max-w-3xl mx-auto">Whether you're an investor, a learner, or a professional, we have a solution for you.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="card border rounded-lg p-6 flex flex-col bg-blue-50/50 border-blue-100"><div class="flex items-center mb-4 text-brand-dark"><i class="fas fa-search text-2xl mr-3 text-blue-500"></i><h3 class="text-2xl font-bold">Find a Professional</h3></div><p class="text-gray-700 mb-6 flex-grow">Connect with verified financial professionals for personalized guidance.</p><ul class="space-y-3 mb-6 flex-grow text-gray-700"><li class="flex items-center"><i class="fas fa-chart-line text-blue-500 mr-3"></i> Investment Planning</li><li class="flex items-center"><i class="fas fa-shield-alt text-blue-500 mr-3"></i> Insurance Solutions</li><li class="flex items-center"><i class="fas fa-file-invoice-dollar text-blue-500 mr-3"></i> Tax Planning</li><li class="flex items-center"><i class="fas fa-coins text-blue-500 mr-3"></i> Wealth Management</li></ul><a href="browselisting.html" class="mt-auto font-semibold text-blue-500 hover:underline inline-flex items-center">Search Professionals <i class="fas fa-arrow-right ml-2 text-sm"></i></a></div>
                    <div class="card border rounded-lg p-6 flex flex-col bg-green-50/50 border-green-100"><div class="flex items-center mb-4 text-brand-green"><i class="fas fa-book-open text-2xl mr-3"></i><h3 class="text-2xl font-bold">Learn & Plan</h3></div><p class="text-gray-700 mb-6 flex-grow">Access financial calculators, guides, and educational resources.</p><ul class="space-y-3 mb-6 flex-grow text-gray-700"><li class="flex items-center"><i class="fas fa-calculator text-brand-green mr-3"></i> Financial Calculators</li><li class="flex items-center"><i class="fas fa-book text-brand-green mr-3"></i> Investment Guides</li><li class="flex items-center"><i class="fas fa-chart-area text-brand-green mr-3"></i> Market Insights</li><li class="flex items-center"><i class="fas fa-graduation-cap text-brand-green mr-3"></i> Learning Center</li></ul><a href="learnplan.html" class="mt-auto font-semibold text-brand-green hover:underline inline-flex items-center">Explore Resources <i class="fas fa-arrow-right ml-2 text-sm"></i></a></div>
                    <div class="card border rounded-lg p-6 flex flex-col bg-yellow-50/50 border-yellow-200"><div class="flex items-center mb-4 text-amber-600"><i class="fas fa-briefcase text-2xl mr-3"></i><h3 class="text-2xl font-bold">For Professionals</h3></div><p class="text-gray-700 mb-6 flex-grow">Join our network of trusted financial professionals and grow your practice.</p><ul class="space-y-3 mb-6 flex-grow text-gray-700"><li class="flex items-center"><i class="fas fa-bullhorn text-amber-600 mr-3"></i> Lead Generation</li><li class="flex items-center"><i class="fas fa-star text-amber-600 mr-3"></i> Build Reputation</li><li class="flex items-center"><i class="fas fa-chart-bar text-amber-600 mr-3"></i> Business Analytics</li><li class="flex items-center"><i class="fas fa-certificate text-amber-600 mr-3"></i> Professional Badge</li></ul><a href="forprofessionals.html" class="mt-auto font-semibold text-amber-600 hover:underline inline-flex items-center">Join Network <i class="fas fa-arrow-right ml-2 text-sm"></i></a></div>
                </div>
            </div>
        </section>

        <section class="py-16 md:py-24 bg-gray-50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-brand-dark">Featured Advisors</h2>
                    <p class="text-gray-600 mt-2">Top-rated professionals hand-picked by our team.</p>
                </div>
                <div id="featured-advisors-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
            </div>
        </section>
        
        <section class="bg-brand-blue">
            <div class="container mx-auto px-6 py-16 text-center">
                 <h2 class="text-3xl font-bold text-white">Stay Updated on Your Financial Journey</h2>
                 <p class="text-blue-200 mt-4 mb-8 max-w-2xl mx-auto">Get weekly market insights, investment tips, and news delivered to your inbox.</p>
                 <a href="subscribe.html" class="btn-green font-bold py-3 px-6 rounded-lg shadow-md inline-block">Subscribe</a>
            </div>
        </section>
    </main>

    <footer class="bg-blue-900 text-white">
        <div class="container mx-auto px-6 py-12">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8">
                <div class="col-span-1 md:col-span-2"><a href="index.html" class="flex items-center space-x-2 mb-4"><img src="InvestSherpa logo.png" alt="InvestSherpa Logo" class="h-12 bg-white rounded-md p-1"></a><p class="text-blue-200 text-sm mb-4 max-w-sm">India's most trusted platform connecting investors with verified financial advisors. Make informed decisions with expert guidance tailored to your financial goals.</p><div class="space-y-2 text-sm"><p><i class="fas fa-phone-alt w-5 text-blue-300"></i> <a href="tel:+919152049967" class="text-blue-200 hover:underline">+91 9152049967</a></p><p><i class="fas fa-envelope w-5 text-blue-300"></i> <a href="mailto:support@investsherpa.com" class="text-blue-200 hover:underline">support@investsherpa.com</a></p><p><i class="fas fa-map-marker-alt w-5 text-blue-300"></i> <span class="text-blue-200">Mumbai, Delhi, Bangalore & 25+ Cities</span></p></div><div class="flex space-x-4 mt-6"><a href="#" class="text-blue-200 hover:text-white"><i class="fab fa-linkedin-in text-xl"></i></a><a href="#" class="text-blue-200 hover:text-white"><i class="fab fa-twitter text-xl"></i></a><a href="#" class="text-blue-200 hover:text-white"><i class="fab fa-facebook-f text-xl"></i></a><a href="#" class="text-blue-200 hover:text-white"><i class="fab fa-instagram text-xl"></i></a><a href="#" class="text-blue-200 hover:text-white"><i class="fab fa-youtube text-xl"></i></a></div></div>
                <div>
                    <h4 class="font-bold mb-4">For Investors</h4>
                    <ul class="space-y-2 text-sm text-blue-200">
                        <li><a href="browselisting.html" class="hover:underline">Find Professionals</a></li>
                        <li><a href="browselisting.html?service=Investment%20Planning" class="hover:underline">Investment Planning</a></li>
                        <li><a href="browselisting.html?service=Insurance%20Solutions" class="hover:underline">Insurance Solutions</a></li>
                        <li><a href="browselisting.html?service=Tax%20Planning" class="hover:underline">Tax Planning</a></li>
                        <li><a href="browselisting.html?service=Retirement%20Planning" class="hover:underline">Retirement Planning</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">For Professionals</h4>
                    <ul class="space-y-2 text-sm text-blue-200">
                        <li><a href="addlisting.html" class="hover:underline">Join Network</a></li>
                        <li><a href="professionaldb.html" class="hover:underline">Business Dashboard</a></li>
                        <li><a href="addlisting.html" class="hover:underline">Lead Generation</a></li>
                        <li><a href="addlisting.html" class="hover:underline">Profile Management</a></li>
                        <li><a href="professionaldb.html" class="hover:underline">Success Stories</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Resources</h4>
                    <ul class="space-y-2 text-sm text-blue-200">
                        <li><a href="learnplan.html" class="hover:underline">Knowledge Hub</a></li>
                        <li><a href="learnplan.html#calculators" class="hover:underline">Financial Calculators</a></li>
                        <li><a href="learnplan.html#insights" class="hover:underline">Market Insights</a></li>
                        <li><a href="learnplan.html#guides" class="hover:underline">Investment Guides</a></li>
                        <li><a href="learnplan.html#tools" class="hover:underline">Powerful Planning Tools</a></li>
                    </ul>
                </div>
            </div>
            <div class="mt-10 border-t border-blue-800 pt-6">
                 <div class="flex flex-col md:flex-row justify-between items-center gap-8">
                     <div class="flex flex-wrap justify-center items-center gap-x-6 gap-y-2 text-sm text-blue-200">
                        <span>Find Professionals:</span>
                        <span class="font-semibold"><i class="fas fa-check-circle mr-1"></i> SEBI Registered</span>
                        <span class="font-semibold"><i class="fas fa-check-circle mr-1"></i> IRDAI Verified</span>
                        <span class="font-semibold"><i class="fas fa-check-circle mr-1"></i> ISO 27001</span>
                        <span class="font-semibold"><i class="fas fa-lock mr-1"></i> SSL Secured</span>
                    </div>
                     <div class="w-full md:w-auto">
                        <h4 class="font-bold mb-2 text-center md:text-left">Stay Updated</h4>
                        <p class="text-blue-200 text-sm mb-2 text-center md:text-left">Get weekly market insights and investment tips.</p>
                        <a href="subscribe.html" class="btn-primary font-bold px-4 py-2 rounded-md shadow-md inline-block w-full text-center">Subscribe</a>
                    </div>
                 </div>
            </div>
            <div class="mt-8 border-t border-blue-800 pt-6 flex flex-col md:flex-row justify-between items-center text-sm text-blue-300">
                <p>&copy; 2025 InvestSherpa. All Rights Reserved.</p>
                <div class="flex space-x-4 mt-4 md:mt-0">
                    <a href="policy.html" class="hover:underline">Privacy Policy</a>
                    <a href="policy.html" class="hover:underline">Terms of Service</a>
                    <a href="policy.html" class="hover:underline">Cookie Policy</a>
                </div>
                 <p class="mt-4 md:mt-0">Made with <i class="fas fa-heart"></i> in India</p>
            </div>
        </div>
    </footer>
    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'
        const SUPABASE_URL = 'https://fjqvfzlfhhkfohprlqhm.supabase.co'; 
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZqcXZmemxmaGhrZm9ocHJscWhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY0ODYyNzAsImV4cCI6MjA3MjA2MjI3MH0.QB_QA-aKeoaxswUpnjBXxerzc-z0tSxerQCQ-hHyLXQ';
        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        const guestView = document.getElementById('guest-view');
        const userView = document.getElementById('user-view');
        const userProfileLink = document.getElementById('user-profile-link');
        const logoutButton = document.getElementById('logout-button');
        const searchInput = document.getElementById('search-query');

        const handleAuthChange = async (session) => {
            if (session) {
                guestView.classList.add('hidden');
                userView.classList.remove('hidden');
                userView.classList.add('flex');
                const user = session.user;
                userProfileLink.textContent = user.email;
                
                const { data: profile } = await supabase.from('user_profiles').select('role').eq('id', user.id).single();

                if (profile && profile.role === 'professional') {
                    const { data: profProfile } = await supabase.from('professional_profiles').select('id').eq('user_id', user.id).single();
                    userProfileLink.href = profProfile ? `listingdetail.html?id=${profProfile.id}` : 'addlisting.html';
                } else {
                    userProfileLink.href = 'userprofile.html';
                }
            } else {
                guestView.classList.remove('hidden');
                userView.classList.add('hidden');
                userView.classList.remove('flex');
            }
        };

        logoutButton.addEventListener('click', async () => await supabase.auth.signOut());
        
        searchInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                window.location.href = `browselisting.html?q=${searchInput.value}`;
            }
        });

        function initializeHeroCarousel() {
            const slides = document.querySelectorAll('#hero-carousel .hero-slide');
            if (slides.length === 0) return;
            let currentSlide = 0;
            setInterval(() => {
                if (slides[currentSlide]) { slides[currentSlide].classList.remove('opacity-100'); slides[currentSlide].classList.add('opacity-0'); }
                currentSlide = (currentSlide + 1) % slides.length;
                if (slides[currentSlide]) { slides[currentSlide].classList.remove('opacity-0'); slides[currentSlide].classList.add('opacity-100'); }
            }, 4000);
        }

        async function displayFeaturedAdvisors() {
            const { data, error } = await supabase.from('professional_profiles')
                .select('id, business_name, city, state, tagline, license_info, service_area, client_focus')
                .eq('status', 'approved')
                .eq('is_featured', true)
                .limit(3);

            if (error) { console.error('Error fetching advisors:', error.message); return; }
            const advisorsGrid = document.getElementById('featured-advisors-grid');
            if (!data || data.length === 0) { 
                advisorsGrid.innerHTML = '<p class="text-center col-span-full">No featured advisors at the moment. Please check back later.</p>';
                return; 
            }
            advisorsGrid.innerHTML = '';
            data.forEach(advisor => {
                 const card = `<div class="card bg-gradient-to-br from-blue-50 to-white rounded-lg shadow-md overflow-hidden border border-blue-100 flex flex-col"><div class="p-6 flex-grow"><h3 class="text-xl font-bold text-brand-dark truncate mb-2">${advisor.business_name}</h3><p class="text-gray-600 mb-3 text-sm"><i class="fas fa-map-marker-alt text-brand-green mr-2"></i>${advisor.city}, ${advisor.state}</p><p class="text-gray-700 mb-4 h-12 text-sm italic line-clamp-2">"${advisor.tagline || 'Expert financial and insurance advice.'}"</p><div class="border-t border-blue-100 pt-4 mt-4 text-sm text-gray-700 space-y-2"><div class="flex items-start"><i class="fas fa-certificate fa-fw mt-1 mr-2 text-brand-green"></i><span><strong>License:</strong> ${advisor.license_info || 'Not specified'}</span></div><div class="flex items-start"><i class="fas fa-globe-americas fa-fw mt-1 mr-2 text-brand-green"></i><span><strong>Service Area:</strong> ${advisor.service_area || 'Not specified'}</span></div><div class="flex items-start"><i class="fas fa-handshake fa-fw mt-1 mr-2 text-brand-green"></i><span><strong>Client Focus:</strong> ${advisor.client_focus || 'Not specified'}</span></div></div></div><div class="p-6 bg-blue-50/50 border-t border-blue-100"><a href="listingdetail.html?id=${advisor.id}" class="btn-green py-2 px-4 rounded-lg text-sm shadow-md inline-flex items-center">View Profile <i class="fas fa-arrow-right ml-2"></i></a></div></div>`;
                advisorsGrid.innerHTML += card;
            });
        }

        async function displayStats() {
            try {
                const { count: profCount } = await supabase.from('professional_profiles').select('*', { count: 'exact', head: true }).eq('status', 'approved'); 
                const { count: reviewCount } = await supabase.from('reviews').select('*', { count: 'exact', head: true }); 
                const { data: citiesData } = await supabase.from('professional_profiles').select('city').eq('status', 'approved'); 
                const uniqueCities = new Set(citiesData.map(item => item.city ? item.city.trim() : '').filter(Boolean));
                document.getElementById('professionals-count').textContent = `${profCount || 0}`;
                document.getElementById('reviews-count').textContent = `${reviewCount || 0}`;
                document.getElementById('cities-count').textContent = `${uniqueCities.size || 0}`;
            } catch (error) {
                console.error("Error fetching stats:", error.message);
            }
        }
        
        document.addEventListener('DOMContentLoaded', async () => {
            const { data: { session } } = await supabase.auth.getSession();
            handleAuthChange(session);
            supabase.auth.onAuthStateChange((_event, session) => {
                handleAuthChange(session);
            });
            displayFeaturedAdvisors();
            displayStats();
            initializeHeroCarousel();
        });
    </script>
</body>
</html>